<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <meta charset="utf-8"/>
    <title>    Gallery PHP code documentation &raquo; \OCA\Gallery\Controller\FilesController
</title>
    <meta name="author" content=""/>
    <meta name="description" content=""/>

            <link href="../css/template.css" rel="stylesheet" media="all"/>
    
            <!--[if lt IE 9]>
        <script src="https://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
        <![endif]-->
        <script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script>
        <script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script>
        <script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script>
        <script src="../js/bootstrap.js" type="text/javascript"></script>
        <script src="../js/template.js" type="text/javascript"></script>
        <script src="../js/prettify/prettify.min.js" type="text/javascript"></script>
    
            <link rel="shortcut icon" href="../img/favicon.ico"/>
        <link rel="apple-touch-icon" href="../img/apple-touch-icon.png"/>
        <link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png"/>
        <link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png"/>
    </head>
<body>

        <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span> <span class="icon-bar"></span>
                    <span class="icon-bar"></span> </a>
                <a class="brand" href="../index.html">Gallery PHP code documentation</a>

                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="dropdown">
                            <a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                API Documentation <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                                                    <li><a>Namespaces</a></li>
                                                                        <li><a href="../namespaces/OCA.html">OCA</a></li>
                                                                                                                                </ul>
                        </li>
                        <li class="dropdown" id="charts-menu">
                            <a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                Charts <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="../graph_class.html">
                                        <i class="icon-list-alt"></i>&#160;Class hierarchy diagram
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="dropdown" id="reports-menu">
                            <a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                Reports <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="../errors.html">
                                        <i class="icon-list-alt"></i>&#160;Errors
                                    </a>
                                </li>
                                <li>
                                    <a href="../markers.html">
                                        <i class="icon-list-alt"></i>&#160;Markers
                                    </a>
                                </li>
                                <li>
                                    <a href="../deprecated.html">
                                        <i class="icon-list-alt"></i>&#160;Deprecated
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="go_to_top">
            <a href="#___" style="color: inherit">Back to top&#160;&#160;<i class="icon-upload icon-white"></i></a>
        </div>
    </div>
    
    <div id="___" class="container">
        <noscript>
            <div class="alert alert-warning">
                Javascript is disabled; several features are only available if Javascript is enabled.
            </div>
        </noscript>

        
            <style>
        .deprecated h2 {
            text-decoration: line-through;
        }
    </style>
    <div class="row">
        <div class="span4">
                    <div class="btn-group view pull-right" data-toggle="buttons-radio">
        <button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button>
        <button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
    </div>
    <div class="btn-group visibility" data-toggle="buttons-checkbox">
        <button class="btn public active" title="Show public elements">Public</button>
        <button class="btn protected" title="Show protected elements">Protected</button>
        <button class="btn private" title="Show private elements">Private</button>
        <button class="btn inherited active" title="Show inherited elements">Inherited</button>
    </div>

        <ul class="side-nav nav nav-list">
        <li class="nav-header">
            <i class="icon-custom icon-method"></i> Methods
            <ul>
                                                                                                    <li class="method public">
        <a href="#method___construct" title="__construct :: Constructor">
            <span class="description">Constructor</span><pre>__construct</pre>
        </a>
    </li>

                                                                                                        <li class="method public inherited">
        <a href="#method_error" title="error :: ">
            <span class="description"></span><pre>error</pre>
        </a>
    </li>

                                                                                                                                                                                                                        <li class="method public">
        <a href="#method_getFiles" title="getFiles :: ">
            <span class="description"></span><pre>getFiles</pre>
        </a>
    </li>

                                                                                                        <li class="method public inherited">
        <a href="#method_getReducedPath" title="getReducedPath :: Returns a shortened path for the gallery view">
            <span class="description">Returns a shortened path for the gallery view</span><pre>getReducedPath</pre>
        </a>
    </li>

                                                </ul>
        </li>
        <li class="nav-header protected">» Protected
            <ul>
                                                                                                                                                                                                                                                                    </ul>
        </li>
        <li class="nav-header private">» Private
            <ul>
                                                                                                                                                    <li class="method private">
                            <a href="#method_fixPaths" title="fixPaths :: Generates shortened paths to the media files">
                                <span class="description">Generates shortened paths to the media files</span><pre>fixPaths</pre>
                            </a>
                        </li>
                                                                                <li class="method private">
                            <a href="#method_formatResults" title="formatResults :: Simply builds and returns an array containing the list of files, the album information and
whether the location has changed or not">
                                <span class="description">Simply builds and returns an array containing the list of files, the album information and
whether the location has changed or not</span><pre>formatResults</pre>
                            </a>
                        </li>
                                                                                                                        </ul>
        </li>
        <li class="nav-header">
            <i class="icon-custom icon-constant"></i> Constants
            <ul>
                            </ul>
        </li>
    </ul>


        </div>

        <div class="span8">
            <div class="element class">
                <h1>FilesController</h1>
                <small style="display: block; text-align: right">
                                            Extends \OCP\AppFramework\Controller
                                                        </small>
                <p class="short_description">Class FilesController</p>
                <div class="details">
                    <div class="long_description">
                        
                    </div>
                    <table class="table table-bordered">
                                                                                    <tr>
                                    <th>
                                        package
                                                                            </th>
                                    <td>
                                                                                    
                                                                                <p>OCA\Gallery\Controller</p>
                                    </td>
                                </tr>
                                                                                                                                                                                                                                                                                                                                            </table>

                    <h3><i class="icon-custom icon-method"></i> Methods</h3>
                                                                <a id="method___construct"></a>
                        <div class="element clickable method public  method___construct" data-toggle="collapse" data-target=".method___construct .collapse">
                            <h2>Constructor</h2>
                            <pre>__construct(string $appName, \OCP\IRequest $request, \OCA\Gallery\Service\SearchFolderService $searchFolderService, \OCA\Gallery\Service\ConfigService $configService, \OCA\Gallery\Service\SearchMediaService $searchMediaService, \OCP\ILogger $logger) </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$appName</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$request</h4>
                                                <code>\OCP\IRequest</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$searchFolderService</h4>
                                                <code><a href="OCA.Gallery.Service.SearchFolderService.html">\OCA\Gallery\Service\SearchFolderService</a></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$configService</h4>
                                                <code><a href="OCA.Gallery.Service.ConfigService.html">\OCA\Gallery\Service\ConfigService</a></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$searchMediaService</h4>
                                                <code><a href="OCA.Gallery.Service.SearchMediaService.html">\OCA\Gallery\Service\SearchMediaService</a></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$logger</h4>
                                                <code>\OCP\ILogger</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_error"></a>
                        <div class="element clickable method public  method_error inherited" data-toggle="collapse" data-target=".method_error .collapse">
                            <h2>error</h2>
                            <pre>error(\Exception $exception) : \OCP\AppFramework\Http\JSONResponse</pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$exception</h4>
                                                <code>\Exception</code><p><p>the message that is returned taken from the exception</p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>\OCP\AppFramework\Http\JSONResponse</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_fixPaths"></a>
                        <div class="element clickable method private  method_fixPaths" data-toggle="collapse" data-target=".method_fixPaths .collapse">
                            <h2>Generates shortened paths to the media files</h2>
                            <pre>fixPaths( $files,  $folderPathFromRoot) : array</pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"><p>We only want to keep one folder between the current folder and the found media file
/root/folder/sub1/sub2/file.ext
becomes
/root/folder/file.ext</p></div>

                                    <table class="table">
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$files</h4>
                                                <code></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$folderPathFromRoot</h4>
                                                <code></code><p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>array</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_formatResults"></a>
                        <div class="element clickable method private  method_formatResults" data-toggle="collapse" data-target=".method_formatResults .collapse">
                            <h2>Simply builds and returns an array containing the list of files, the album information and
whether the location has changed or not</h2>
                            <pre>formatResults( $files, array $albumInfo, boolean $locationHasChanged) : array</pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$files</h4>
                                                <code></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$albumInfo</h4>
                                                <code>array</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$locationHasChanged</h4>
                                                <code>boolean</code><p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>array</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_getFiles"></a>
                        <div class="element clickable method public  method_getFiles" data-toggle="collapse" data-target=".method_getFiles .collapse">
                            <h2>getFiles</h2>
                            <pre>getFiles(string $location, string $features, string $etag) : array</pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    NoAdminRequired
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        <p>Returns a list of all media files available to the authenticated user</p>
<ul>
<li>Authentication can be via a login/password or a token/(password)</li>
<li>For private galleries, it returns all media files, with the full path from the root
folder For public galleries, the path starts from the folder the link gives access to
(virtual root)</li>
<li>An exception is only caught in case something really wrong happens. As we don't test
files before including them in the list, we may return some bad apples</li>
</ul>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$location</h4>
                                                <code>string</code><p><p>a path representing the current album in the app</p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$features</h4>
                                                <code>string</code><p><p>the list of supported features</p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$etag</h4>
                                                <code>string</code><p><p>the last known etag in the client</p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>array</code><p><p>&lt;string,array&lt;string,string|int&gt;&gt;|Http\JSONResponse</p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_getReducedPath"></a>
                        <div class="element clickable method public  method_getReducedPath inherited" data-toggle="collapse" data-target=".method_getReducedPath .collapse">
                            <h2>Returns a shortened path for the gallery view</h2>
                            <pre>getReducedPath(string $path, string $currFolderPath) : string</pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"><p>We only want to keep one folder between the current folder and the found media file
/root/folder/sub1/sub2/file.ext
becomes
/root/folder/file.ext</p></div>

                                    <table class="table">
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$path</h4>
                                                <code>string</code><p><p>the full path to a file, which never starts with a slash</p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$currFolderPath</h4>
                                                <code>string</code><p><p>the current folder, which never starts with a slash</p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>string</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                    
                    
                                                                <h3><i class="icon-custom icon-property"></i> Properties</h3>
                                                    <a id="property_searchFolderService"> </a>
                            <div class="element clickable property  private property_searchFolderService" data-toggle="collapse" data-target=".property_searchFolderService .collapse">
                                <h2>searchFolderService</h2>
                                <pre>searchFolderService : \OCA\Gallery\Service\SearchFolderService</pre>
                                <div class="labels">
                                                                                                        </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code><a href="OCA.Gallery.Service.SearchFolderService.html">\OCA\Gallery\Service\SearchFolderService</a></code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_configService"> </a>
                            <div class="element clickable property  private property_configService" data-toggle="collapse" data-target=".property_configService .collapse">
                                <h2>configService</h2>
                                <pre>configService : \OCA\Gallery\Service\ConfigService</pre>
                                <div class="labels">
                                                                                                        </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code><a href="OCA.Gallery.Service.ConfigService.html">\OCA\Gallery\Service\ConfigService</a></code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_searchMediaService"> </a>
                            <div class="element clickable property  private property_searchMediaService" data-toggle="collapse" data-target=".property_searchMediaService .collapse">
                                <h2>searchMediaService</h2>
                                <pre>searchMediaService : \OCA\Gallery\Service\SearchMediaService</pre>
                                <div class="labels">
                                                                                                        </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code><a href="OCA.Gallery.Service.SearchMediaService.html">\OCA\Gallery\Service\SearchMediaService</a></code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_logger"> </a>
                            <div class="element clickable property  private property_logger" data-toggle="collapse" data-target=".property_logger .collapse">
                                <h2>logger</h2>
                                <pre>logger : \OCP\ILogger</pre>
                                <div class="labels">
                                                                                                        </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code>\OCP\ILogger</code>
                                                                            </div>
                                </div>
                            </div>
                                                            </div>
            </div>
            <a id="\OCA\Gallery\Controller\FilesController"></a>
            <ul class="breadcrumb">
                <li><a href="../index.html"><i class="icon-custom icon-class"></i></a></li>
                    
    
    <li><span class="divider">\</span><a href="../namespaces/OCA.Gallery.Controller.html">Controller</a></li>

                <li class="active"><span class="divider">\</span><a href="../classes/OCA.Gallery.Controller.FilesController.html">FilesController</a></li>
            </ul>
        </div>
    </div>

    </div>

        <footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by
            <a href="http://glyphicons.com/">Glyphicons</a>.<br/>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor </a> and<br/>
            generated on Sat, 15 Aug 2015 01:15:08 +0000.<br/>
    </footer>
    </body>
</html>
