<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <meta charset="utf-8"/>
    <title>    Gallery PHP code documentation &raquo; \OCA\Gallery\Middleware\EnvCheckMiddleware
</title>
    <meta name="author" content=""/>
    <meta name="description" content=""/>

            <link href="../css/template.css" rel="stylesheet" media="all"/>
    
            <!--[if lt IE 9]>
        <script src="https://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
        <![endif]-->
        <script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script>
        <script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script>
        <script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script>
        <script src="../js/bootstrap.js" type="text/javascript"></script>
        <script src="../js/template.js" type="text/javascript"></script>
        <script src="../js/prettify/prettify.min.js" type="text/javascript"></script>
    
            <link rel="shortcut icon" href="../img/favicon.ico"/>
        <link rel="apple-touch-icon" href="../img/apple-touch-icon.png"/>
        <link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png"/>
        <link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png"/>
    </head>
<body>

        <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span> <span class="icon-bar"></span>
                    <span class="icon-bar"></span> </a>
                <a class="brand" href="../index.html">Gallery PHP code documentation</a>

                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="dropdown">
                            <a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                API Documentation <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                                                    <li><a>Namespaces</a></li>
                                                                        <li><a href="../namespaces/OCA.html">OCA</a></li>
                                                                                                                                </ul>
                        </li>
                        <li class="dropdown" id="charts-menu">
                            <a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                Charts <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="../graph_class.html">
                                        <i class="icon-list-alt"></i>&#160;Class hierarchy diagram
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="dropdown" id="reports-menu">
                            <a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                Reports <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="../errors.html">
                                        <i class="icon-list-alt"></i>&#160;Errors
                                    </a>
                                </li>
                                <li>
                                    <a href="../markers.html">
                                        <i class="icon-list-alt"></i>&#160;Markers
                                    </a>
                                </li>
                                <li>
                                    <a href="../deprecated.html">
                                        <i class="icon-list-alt"></i>&#160;Deprecated
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="go_to_top">
            <a href="#___" style="color: inherit">Back to top&#160;&#160;<i class="icon-upload icon-white"></i></a>
        </div>
    </div>
    
    <div id="___" class="container">
        <noscript>
            <div class="alert alert-warning">
                Javascript is disabled; several features are only available if Javascript is enabled.
            </div>
        </noscript>

        
            <style>
        .deprecated h2 {
            text-decoration: line-through;
        }
    </style>
    <div class="row">
        <div class="span4">
                    <div class="btn-group view pull-right" data-toggle="buttons-radio">
        <button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button>
        <button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
    </div>
    <div class="btn-group visibility" data-toggle="buttons-checkbox">
        <button class="btn public active" title="Show public elements">Public</button>
        <button class="btn protected" title="Show protected elements">Protected</button>
        <button class="btn private" title="Show private elements">Private</button>
        <button class="btn inherited active" title="Show inherited elements">Inherited</button>
    </div>

        <ul class="side-nav nav nav-list">
        <li class="nav-header">
            <i class="icon-custom icon-method"></i> Methods
            <ul>
                                                                                                    <li class="method public inherited">
        <a href="#method___construct" title="__construct :: ">
            <span class="description"></span><pre>__construct</pre>
        </a>
    </li>

                                                                                                        <li class="method public inherited">
        <a href="#method_afterException" title="afterException :: If a CheckException is being caught, clients who sent an ajax requests
get a JSON error response while the others are redirected to an error
page">
            <span class="description">If a CheckException is being caught, clients who sent an ajax requests
get a JSON error response while the others are redirected to an error
page</span><pre>afterException</pre>
        </a>
    </li>

                                                                                                                                                                <li class="method public">
        <a href="#method_beforeController" title="beforeController :: Checks that we have a valid token linked to a valid resource and that the
user is authorised to access it">
            <span class="description">Checks that we have a valid token linked to a valid resource and that the
user is authorised to access it</span><pre>beforeController</pre>
        </a>
    </li>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </ul>
        </li>
        <li class="nav-header protected">» Protected
            <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <li class="method protected inherited">
                            <a href="#method_logAndThrow" title="logAndThrow :: Logs the error and raises an exception">
                                <span class="description">Logs the error and raises an exception</span><pre>logAndThrow</pre>
                            </a>
                        </li>
                                                                                                                                                                                                                                                                        </ul>
        </li>
        <li class="nav-header private">» Private
            <ul>
                                                                                                                                                    <li class="method private">
                            <a href="#method_authenticate" title="authenticate :: Authenticate link item with the given password
or with the session if no password was given.">
                                <span class="description">Authenticate link item with the given password
or with the session if no password was given.</span><pre>authenticate</pre>
                            </a>
                        </li>
                                                                                                                    <li class="method private">
                            <a href="#method_checkAuthorisation" title="checkAuthorisation :: Checks if a password is required or if the one supplied is working">
                                <span class="description">Checks if a password is required or if the one supplied is working</span><pre>checkAuthorisation</pre>
                            </a>
                        </li>
                                                                                <li class="method private">
                            <a href="#method_checkItemType" title="checkItemType :: Makes sure an item type was set for that token">
                                <span class="description">Makes sure an item type was set for that token</span><pre>checkItemType</pre>
                            </a>
                        </li>
                                                                                <li class="method private">
                            <a href="#method_checkLinkItemExists" title="checkLinkItemExists :: Makes sure that the token exists">
                                <span class="description">Makes sure that the token exists</span><pre>checkLinkItemExists</pre>
                            </a>
                        </li>
                                                                                <li class="method private">
                            <a href="#method_checkLinkItemIsValid" title="checkLinkItemIsValid :: Makes sure that the token contains all the information that we need">
                                <span class="description">Makes sure that the token contains all the information that we need</span><pre>checkLinkItemIsValid</pre>
                            </a>
                        </li>
                                                                                <li class="method private">
                            <a href="#method_checkPassword" title="checkPassword :: Validates the given password">
                                <span class="description">Validates the given password</span><pre>checkPassword</pre>
                            </a>
                        </li>
                                                                                <li class="method private">
                            <a href="#method_checkSession" title="checkSession :: Makes sure the user is already properly authenticated when a password is required and none
was provided">
                                <span class="description">Makes sure the user is already properly authenticated when a password is required and none
was provided</span><pre>checkSession</pre>
                            </a>
                        </li>
                                                                                <li class="method private inherited">
                            <a href="#method_computeResponse" title="computeResponse :: Decides which type of response to send">
                                <span class="description">Decides which type of response to send</span><pre>computeResponse</pre>
                            </a>
                        </li>
                                                                                <li class="method private">
                            <a href="#method_getLinkItem" title="getLinkItem :: Validates a token to make sure its linked to a valid resource">
                                <span class="description">Validates a token to make sure its linked to a valid resource</span><pre>getLinkItem</pre>
                            </a>
                        </li>
                                                                                                                    <li class="method private">
                            <a href="#method_noTokenFound" title="noTokenFound :: Throws an exception because no token was provided">
                                <span class="description">Throws an exception because no token was provided</span><pre>noTokenFound</pre>
                            </a>
                        </li>
                                                                                <li class="method private inherited">
                            <a href="#method_redirectToErrorPage" title="redirectToErrorPage :: Redirects the client to an error page">
                                <span class="description">Redirects the client to an error page</span><pre>redirectToErrorPage</pre>
                            </a>
                        </li>
                                                                                <li class="method private inherited">
                            <a href="#method_sendHtml401" title="sendHtml401 :: Shows an authentication form">
                                <span class="description">Shows an authentication form</span><pre>sendHtml401</pre>
                            </a>
                        </li>
                                                                                <li class="method private inherited">
                            <a href="#method_sendHtmlResponse" title="sendHtmlResponse :: Redirects the client to an error page or shows an authentication form">
                                <span class="description">Redirects the client to an error page or shows an authentication form</span><pre>sendHtmlResponse</pre>
                            </a>
                        </li>
                                                                                <li class="method private inherited">
                            <a href="#method_sendJsonResponse" title="sendJsonResponse :: Returns a JSON response to the client">
                                <span class="description">Returns a JSON response to the client</span><pre>sendJsonResponse</pre>
                            </a>
                        </li>
                                                                                <li class="method private">
                            <a href="#method_validateAndSetTokenBasedEnv" title="validateAndSetTokenBasedEnv :: Checks that we have a token and an optional password giving access to a
valid resource. Sets the token based environment after that">
                                <span class="description">Checks that we have a token and an optional password giving access to a
valid resource. Sets the token based environment after that</span><pre>validateAndSetTokenBasedEnv</pre>
                            </a>
                        </li>
                                                </ul>
        </li>
        <li class="nav-header">
            <i class="icon-custom icon-constant"></i> Constants
            <ul>
                            </ul>
        </li>
    </ul>


        </div>

        <div class="span8">
            <div class="element class">
                <h1>EnvCheckMiddleware</h1>
                <small style="display: block; text-align: right">
                                            Extends <a href="OCA.Gallery.Middleware.CheckMiddleware.html">\OCA\Gallery\Middleware\CheckMiddleware</a>
                                                        </small>
                <p class="short_description">Checks that we have a valid token linked to a valid resource and that the
user is authorised to access it</p>
                <div class="details">
                    <div class="long_description">
                        <p>Once all checks have been passed, the environment is ready to use</p>
                    </div>
                    <table class="table table-bordered">
                                                                                    <tr>
                                    <th>
                                        package
                                                                            </th>
                                    <td>
                                                                                    
                                                                                <p>OCA\Gallery\Middleware</p>
                                    </td>
                                </tr>
                                                                                                                                                                                </table>

                    <h3><i class="icon-custom icon-method"></i> Methods</h3>
                                                                <a id="method___construct"></a>
                        <div class="element clickable method public  method___construct inherited" data-toggle="collapse" data-target=".method___construct .collapse">
                            <h2>__construct</h2>
                            <pre>__construct( $appName, \OCP\IRequest $request, \OCP\IURLGenerator $urlGenerator, \OCP\ILogger $logger) </pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$appName</h4>
                                                <code></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$request</h4>
                                                <code>\OCP\IRequest</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$urlGenerator</h4>
                                                <code>\OCP\IURLGenerator</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$logger</h4>
                                                <code>\OCP\ILogger</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_afterException"></a>
                        <div class="element clickable method public  method_afterException inherited" data-toggle="collapse" data-target=".method_afterException .collapse">
                            <h2>If a CheckException is being caught, clients who sent an ajax requests
get a JSON error response while the others are redirected to an error
page</h2>
                            <pre>afterException( $controller,  $methodName, \Exception $exception) </pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    inheritDoc
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$controller</h4>
                                                <code></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$methodName</h4>
                                                <code></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$exception</h4>
                                                <code>\Exception</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_authenticate"></a>
                        <div class="element clickable method private  method_authenticate" data-toggle="collapse" data-target=".method_authenticate .collapse">
                            <h2>Authenticate link item with the given password
or with the session if no password was given.</h2>
                            <pre>authenticate(array|boolean $linkItem, string $password) : boolean</pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    fixme
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        <p>@LukasReschke says: Migrate old hashes to new hash format
Due to the fact that there is no reasonable functionality to update the password
of an existing share no migration is yet performed there.
The only possibility is to update the existing share which will result in a new
share ID and is a major hack.</p>
<p>In the future the migration should be performed once there is a proper method
to update the share's password. (for example <code>$share-&gt;updatePassword($password)</code></p>
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    link
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        <p><a href="https://github.com/owncloud/core/issues/10671">https://github.com/owncloud/core/issues/10671</a></p>
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    throws
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$linkItem</h4>
                                                <code>array|boolean</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$password</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>boolean</code><p><p>true if authorized, an exception is raised otherwise</p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_beforeController"></a>
                        <div class="element clickable method public  method_beforeController" data-toggle="collapse" data-target=".method_beforeController .collapse">
                            <h2>Checks that we have a valid token linked to a valid resource and that the
user is authorised to access it</h2>
                            <pre>beforeController( $controller,  $methodName) </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"><p>Inspects the controller method annotations and if PublicPage is found
it checks that we have a token and an optional password giving access to a valid resource.
Once that's done, the environment is setup so that our services can find the resources they
need.</p>
<p>The checks are not performed on &quot;guest&quot; pages and the environment is not setup. Typical
guest pages are anonymous error ages</p></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    inheritDoc
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$controller</h4>
                                                <code></code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$methodName</h4>
                                                <code></code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_checkAuthorisation"></a>
                        <div class="element clickable method private  method_checkAuthorisation" data-toggle="collapse" data-target=".method_checkAuthorisation .collapse">
                            <h2>Checks if a password is required or if the one supplied is working</h2>
                            <pre>checkAuthorisation(array|boolean $linkItem, string|null $password) </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    throws
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$linkItem</h4>
                                                <code>array|boolean</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$password</h4>
                                                <code>string|null</code><p><p>optional password</p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_checkItemType"></a>
                        <div class="element clickable method private  method_checkItemType" data-toggle="collapse" data-target=".method_checkItemType .collapse">
                            <h2>Makes sure an item type was set for that token</h2>
                            <pre>checkItemType(array|boolean $linkItem) </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$linkItem</h4>
                                                <code>array|boolean</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_checkLinkItemExists"></a>
                        <div class="element clickable method private  method_checkLinkItemExists" data-toggle="collapse" data-target=".method_checkLinkItemExists .collapse">
                            <h2>Makes sure that the token exists</h2>
                            <pre>checkLinkItemExists(array|boolean $linkItem) </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$linkItem</h4>
                                                <code>array|boolean</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_checkLinkItemIsValid"></a>
                        <div class="element clickable method private  method_checkLinkItemIsValid" data-toggle="collapse" data-target=".method_checkLinkItemIsValid .collapse">
                            <h2>Makes sure that the token contains all the information that we need</h2>
                            <pre>checkLinkItemIsValid(array|boolean $linkItem, string $token) </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$linkItem</h4>
                                                <code>array|boolean</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$token</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_checkPassword"></a>
                        <div class="element clickable method private  method_checkPassword" data-toggle="collapse" data-target=".method_checkPassword .collapse">
                            <h2>Validates the given password</h2>
                            <pre>checkPassword(array|boolean $linkItem, string $password) </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    throws
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$linkItem</h4>
                                                <code>array|boolean</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$password</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_checkSession"></a>
                        <div class="element clickable method private  method_checkSession" data-toggle="collapse" data-target=".method_checkSession .collapse">
                            <h2>Makes sure the user is already properly authenticated when a password is required and none
was provided</h2>
                            <pre>checkSession(array|boolean $linkItem) </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    throws
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$linkItem</h4>
                                                <code>array|boolean</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_computeResponse"></a>
                        <div class="element clickable method private  method_computeResponse inherited" data-toggle="collapse" data-target=".method_computeResponse .collapse">
                            <h2>Decides which type of response to send</h2>
                            <pre>computeResponse(string $message, integer $code) : \OCP\AppFramework\Http\JSONResponse|\OCP\AppFramework\Http\RedirectResponse|\OCP\AppFramework\Http\TemplateResponse</pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$message</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$code</h4>
                                                <code>integer</code><p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>\OCP\AppFramework\Http\JSONResponse|\OCP\AppFramework\Http\RedirectResponse|\OCP\AppFramework\Http\TemplateResponse</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_getLinkItem"></a>
                        <div class="element clickable method private  method_getLinkItem" data-toggle="collapse" data-target=".method_getLinkItem .collapse">
                            <h2>Validates a token to make sure its linked to a valid resource</h2>
                            <pre>getLinkItem(string $token) : array</pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"><p>Logic mostly duplicated from @see \OCA\Files_Sharing\Helper</p></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    fixme
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        <p>setIncognitoMode in 8.1 <a href="https://github.com/owncloud/core/pull/12912">https://github.com/owncloud/core/pull/12912</a></p>
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    throws
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$token</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>array</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_logAndThrow"></a>
                        <div class="element clickable method protected  method_logAndThrow inherited" data-toggle="collapse" data-target=".method_logAndThrow .collapse">
                            <h2>Logs the error and raises an exception</h2>
                            <pre>logAndThrow(string $message, integer $code) </pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    throws
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$message</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$code</h4>
                                                <code>integer</code><p></p>
                                            </div>
                                                                            
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_noTokenFound"></a>
                        <div class="element clickable method private  method_noTokenFound" data-toggle="collapse" data-target=".method_noTokenFound .collapse">
                            <h2>Throws an exception because no token was provided</h2>
                            <pre>noTokenFound() </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    throws
                                                </th>
                                                <td>
                                                                                                                                                                        
                                                                                                                                                                        
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                    
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_redirectToErrorPage"></a>
                        <div class="element clickable method private  method_redirectToErrorPage inherited" data-toggle="collapse" data-target=".method_redirectToErrorPage .collapse">
                            <h2>Redirects the client to an error page</h2>
                            <pre>redirectToErrorPage(string $message, integer $code) : \OCP\AppFramework\Http\RedirectResponse</pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$message</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$code</h4>
                                                <code>integer</code><p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>\OCP\AppFramework\Http\RedirectResponse</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_sendHtml401"></a>
                        <div class="element clickable method private  method_sendHtml401 inherited" data-toggle="collapse" data-target=".method_sendHtml401 .collapse">
                            <h2>Shows an authentication form</h2>
                            <pre>sendHtml401() : \OCP\AppFramework\Http\TemplateResponse</pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                    
                                                                            <h3>Response</h3>
                                        <code>\OCP\AppFramework\Http\TemplateResponse</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_sendHtmlResponse"></a>
                        <div class="element clickable method private  method_sendHtmlResponse inherited" data-toggle="collapse" data-target=".method_sendHtmlResponse .collapse">
                            <h2>Redirects the client to an error page or shows an authentication form</h2>
                            <pre>sendHtmlResponse(string $message, integer $code) : \OCP\AppFramework\Http\RedirectResponse|\OCP\AppFramework\Http\TemplateResponse</pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$message</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$code</h4>
                                                <code>integer</code><p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>\OCP\AppFramework\Http\RedirectResponse|\OCP\AppFramework\Http\TemplateResponse</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_sendJsonResponse"></a>
                        <div class="element clickable method private  method_sendJsonResponse inherited" data-toggle="collapse" data-target=".method_sendJsonResponse .collapse">
                            <h2>Returns a JSON response to the client</h2>
                            <pre>sendJsonResponse(string $message, integer $code) : \OCP\AppFramework\Http\JSONResponse</pre>
                            <div class="labels">
                                <span class="label">inherited</span>                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                            </table>

                                                                            <h3>Arguments</h3>
                                                                                    <div class="subelement argument">
                                                <h4>$message</h4>
                                                <code>string</code><p></p>
                                            </div>
                                                                                    <div class="subelement argument">
                                                <h4>$code</h4>
                                                <code>integer</code><p></p>
                                            </div>
                                                                            
                                                                            <h3>Response</h3>
                                        <code>\OCP\AppFramework\Http\JSONResponse</code><p></p>
                                                                    </div>
                            </div>

                        </div>
                                            <a id="method_validateAndSetTokenBasedEnv"></a>
                        <div class="element clickable method private  method_validateAndSetTokenBasedEnv" data-toggle="collapse" data-target=".method_validateAndSetTokenBasedEnv .collapse">
                            <h2>Checks that we have a token and an optional password giving access to a
valid resource. Sets the token based environment after that</h2>
                            <pre>validateAndSetTokenBasedEnv() </pre>
                            <div class="labels">
                                                                                                                                                                                            </div>

                            
                            <div class="row collapse">
                                <div class="detail-description">
                                    <div class="long_description"></div>

                                    <table class="table">
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                                    <tr>
                                                <th>
                                                    
                                                </th>
                                                <td>
                                                                                                    </td>
                                            </tr>
                                                                            </table>

                                    
                                                                    </div>
                            </div>

                        </div>
                    
                    
                                                                <h3><i class="icon-custom icon-property"></i> Properties</h3>
                                                    <a id="property_hasher"> </a>
                            <div class="element clickable property  private property_hasher" data-toggle="collapse" data-target=".property_hasher .collapse">
                                <h2>hasher</h2>
                                <pre>hasher : \OCP\Security\IHasher</pre>
                                <div class="labels">
                                                                                                        </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code>\OCP\Security\IHasher</code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_session"> </a>
                            <div class="element clickable property  private property_session" data-toggle="collapse" data-target=".property_session .collapse">
                                <h2>session</h2>
                                <pre>session : \OCP\ISession</pre>
                                <div class="labels">
                                                                                                        </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code>\OCP\ISession</code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_environment"> </a>
                            <div class="element clickable property  private property_environment" data-toggle="collapse" data-target=".property_environment .collapse">
                                <h2>environment</h2>
                                <pre>environment : \OCA\Gallery\Environment\Environment</pre>
                                <div class="labels">
                                                                                                        </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code><a href="OCA.Gallery.Environment.Environment.html">\OCA\Gallery\Environment\Environment</a></code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_reflector"> </a>
                            <div class="element clickable property  protected property_reflector" data-toggle="collapse" data-target=".property_reflector .collapse">
                                <h2>reflector</h2>
                                <pre>reflector : \OCP\AppFramework\Utility\IControllerMethodReflector</pre>
                                <div class="labels">
                                                                                                        </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code>\OCP\AppFramework\Utility\IControllerMethodReflector</code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_appName"> </a>
                            <div class="element clickable property  protected property_appName inherited" data-toggle="collapse" data-target=".property_appName .collapse">
                                <h2>appName</h2>
                                <pre>appName : string</pre>
                                <div class="labels">
                                    <span class="label">inherited</span>                                                                    </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code>string</code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_request"> </a>
                            <div class="element clickable property  protected property_request inherited" data-toggle="collapse" data-target=".property_request .collapse">
                                <h2>request</h2>
                                <pre>request : \OCP\IRequest</pre>
                                <div class="labels">
                                    <span class="label">inherited</span>                                                                    </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code>\OCP\IRequest</code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_urlGenerator"> </a>
                            <div class="element clickable property  private property_urlGenerator inherited" data-toggle="collapse" data-target=".property_urlGenerator .collapse">
                                <h2>urlGenerator</h2>
                                <pre>urlGenerator : \OCP\IURLGenerator</pre>
                                <div class="labels">
                                    <span class="label">inherited</span>                                                                    </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code>\OCP\IURLGenerator</code>
                                                                            </div>
                                </div>
                            </div>
                                                    <a id="property_logger"> </a>
                            <div class="element clickable property  protected property_logger inherited" data-toggle="collapse" data-target=".property_logger .collapse">
                                <h2>logger</h2>
                                <pre>logger : \OCP\ILogger</pre>
                                <div class="labels">
                                    <span class="label">inherited</span>                                                                    </div>
                                <div class="row collapse">
                                    <div class="detail-description">
                                        <div class="long_description"></div>

                                        <table class="table">
                                                                                            <tr>
                                                    <th>
                                                        var
                                                    </th>
                                                    <td>
                                                                                                                    
                                                                                                            </td>
                                                </tr>
                                                                                    </table>

                                                                                    <h3>Type(s)</h3>
                                            <code>\OCP\ILogger</code>
                                                                            </div>
                                </div>
                            </div>
                                                            </div>
            </div>
            <a id="\OCA\Gallery\Middleware\EnvCheckMiddleware"></a>
            <ul class="breadcrumb">
                <li><a href="../index.html"><i class="icon-custom icon-class"></i></a></li>
                    
    
    <li><span class="divider">\</span><a href="../namespaces/OCA.Gallery.Middleware.html">Middleware</a></li>

                <li class="active"><span class="divider">\</span><a href="../classes/OCA.Gallery.Middleware.EnvCheckMiddleware.html">EnvCheckMiddleware</a></li>
            </ul>
        </div>
    </div>

    </div>

        <footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by
            <a href="http://glyphicons.com/">Glyphicons</a>.<br/>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor </a> and<br/>
            generated on Sat, 15 Aug 2015 01:15:08 +0000.<br/>
    </footer>
    </body>
</html>
